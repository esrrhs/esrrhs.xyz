<!DOCTYPE html>
<html lang="en">
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?08be2524e25f77c0fc3587ba24a3e252";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">
	
    <title>BT搜索</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="dist/css/bootstrap-table.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="texas.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="assets/js/ie-emulation-modes-warning.js"></script>
	<script src="jquery.min.js"></script>
	<script src="dist/js/bootstrap.min.js"></script>
	<script src="dist/js/bootstrap-table.min.js"></script>
	<script src="dist/js/bootstrap-table-zh-CN.min.js"></script>

	<script>
	$(document).ready(function(){
	
		function clock()
		{
			$('#table').bootstrapTable({
						striped : true, //是否显示行间隔色
						pageNumber : 1, //初始化加载第一页
						pagination : true,//是否分页
						sidePagination : 'client',//server:服务器端分页|client：前端分页
						pageSize : 10,//单页记录数
						pageList : [ 5, 10, 20, 30 ],//可选择单页记录数
					});
					
			fetch("http://ali.esrrhs.xyz/dhtlast").then(function (response) {
					return response.json();
				}).then(function (json) {
					var data = json["data"];
					var d = $.parseJSON(data);
					
					$('#table').bootstrapTable("load", d["info"]);
					$("#total").text("种子数 : "+d["n"]);
				});
		}
		
		var int=window.setInterval(clock, 2000);
		clock();
		
	  $("#cal").click(function(){
		window.clearInterval(int)
	  
		var name = $("#inputName").val()

		$('#table').bootstrapTable("load", [{"infohash":"加载中......","name":"加载中......"}]);
		
		fetch("http://ali.esrrhs.xyz/dht?name="+name).then(function (response) {
				return response.json();
			}).then(function (json) {
				var data = json["data"];
				var d = $.parseJSON(data);

				if (d["info"] == null)
				{
					$('#table').bootstrapTable("load", []);
				}
				else
				{
					$('#table').bootstrapTable("load", d["info"]);
				}
				
				$("#total").text("种子数 : "+d["n"]);
			});
	  });
	
	});
	</script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="container">

      <form class="form-signin">
        <ul class="list-inline">
		<li><h1 class="form-signin-heading">BT搜索</h1></li>
		<li><span class="label label-default" id="total">条数</span></li>
		</ul>
		
		<ul class="list-inline">
		<li><h2><span class="label label-default">输入</span></h2></li>
        <li><label for="inputName" class="sr-only">输入</label>
        <input type="name" id="inputName" class="form-control" placeholder="输入搜索词 空格分割" value="" required autofocus>
		</li></ul>
						
		<button id="cal" type="button" class="btn btn-primary btn-lg btn-block">搜索</button>
		
      </form>
	  
        <table class="table" id="table">
            <thead>
                <tr>
                    <th data-field="infohash">InfoHash</th>
                    <th data-field="name" data-sortable="True">Name</th>
                </tr>
            </thead>
        </table>

    </div> <!-- /container -->


    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
